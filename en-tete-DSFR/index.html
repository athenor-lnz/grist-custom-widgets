<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GÃ©nÃ©rateur dâ€™en-tÃªte DSFR</title>

  <!-- DSFR CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@gouvfr/dsfr@1.13.1/dist/dsfr/dsfr.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@gouvfr/dsfr@1.13.1/dist/dsfr/utility/utilities.min.css">

  <style>
    body { background: white; margin: 0; padding: 1rem; }
    .fr-container { max-width: 800px; }
    .fr-header, .fr-header__brand { filter: none !important; --hover: transparent; }
    .codebox { width: 100%; min-height: 250px; font-family: monospace; }
    #operator-section { display: none; }
    .note { font-size: 0.9rem; color: #666; margin-top: 1rem; }
  </style>
</head>
<body>

  <div class="fr-container">
    <h2 class="fr-h3">GÃ©nÃ©rateur dâ€™en-tÃªte DSFR</h2>
    <p class="fr-text--sm">
      Remplissez les champs ci-dessous, prÃ©visualisez le rendu, puis gÃ©nÃ©rez le code HTML statique Ã  copier.
      <br><br>
      <strong>ğŸ’¡ Conseil :</strong> le code gÃ©nÃ©rÃ© est conÃ§u pour Ãªtre collÃ© directement dans la configuration du
      <em>Custom Widget Builder</em> du dÃ©veloppeur <strong>berhalak</strong> sur <a href="https://grist.numerique.gouv.fr" target="_blank">grist.numerique.gouv.fr</a>.
    </p>

    <form id="config-form" class="fr-my-3w">
      <div class="fr-select-group fr-mb-3w">
        <label class="fr-label" for="intitule">Bloc marque</label>
        <select id="intitule" class="fr-select" required>
          <option value="">â€” SÃ©lectionner â€”</option>
        </select>
      </div>

      <div class="fr-input-group fr-mb-3w">
        <label class="fr-label" for="nomService">Nom du service</label>
        <input id="nomService" class="fr-input" type="text" placeholder="">
      </div>

      <div class="fr-input-group fr-mb-3w">
        <label class="fr-label" for="baseline">Baseline (sous-titre)</label>
        <input id="baseline" class="fr-input" type="text" placeholder="">
      </div>

      <div class="fr-input-group fr-mb-3w">
        <label class="fr-label" for="logoUrl">Logo (URL, facultatif)</label>
        <input id="logoUrl" class="fr-input" type="url" placeholder="https://exemple.com/logo.png">
      </div>

      <div class="fr-btns-group fr-btns-group--right">
        <button type="button" id="btn-preview" class="fr-btn">PrÃ©visualiser</button>
        <button type="button" id="btn-generate" class="fr-btn fr-btn--secondary">GÃ©nÃ©rer le HTML</button>
        <button type="button" id="btn-reset" class="fr-btn fr-btn--tertiary">RÃ©initialiser</button>
      </div>
    </form>

    <div id="preview" style="display:none;" class="fr-mb-4w">
      <header role="banner" class="fr-header">
        <div class="fr-header__body">
          <div class="fr-container">
            <div class="fr-header__body-row">
              <div class="fr-header__brand fr-enlarge-link">
                <div class="fr-header__brand-top">
                  <div class="fr-header__logo">
                    <p class="fr-logo" id="intitule-officiel">RÃ©publique<br>FranÃ§aise</p>
                  </div>
                  <div class="fr-header__operator" id="operator-section">
                    <img id="logo-img" class="fr-responsive-img" style="max-width: 9rem;" alt="Logo">
                  </div>
                </div>
                <div class="fr-header__service">
                  <p class="fr-header__service-title" id="nom-service"></p>
                  <p class="fr-header__service-tagline" id="baseline-text"></p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </header>
    </div>

    <div id="result-block" style="display:none;">
      <h4 class="fr-h4">Code HTML gÃ©nÃ©rÃ©</h4>
      <textarea id="export-code" class="fr-input codebox" readonly></textarea>
      <div class="fr-btns-group fr-mt-2w">
        <button type="button" id="btn-copy" class="fr-btn">Copier</button>
        <button type="button" id="btn-download" class="fr-btn fr-btn--secondary">TÃ©lÃ©charger</button>
      </div>
      <p class="note">
        ğŸ’¡ Collez ce code dans le <strong>Custom Widget Builder</strong> de <strong>berhalak</strong> pour lâ€™utiliser dans un widget Grist.
      </p>
    </div>

    <hr class="fr-my-4w">
    <p class="fr-text--sm" style="text-align:center; color:#666;">
      ğŸ§© <strong>Credits</strong><br>
      Adapted from <a href="https://github.com/agrippaharfleur/grist-custom-widgets" target="_blank">agrippaharfleur/grist-custom-widgets</a><br>
      Original code licensed under the <strong>MIT License</strong><br>
      Modified and adapted by <a href="https://github.com/athenor-lnz" target="_blank"><strong>github.com/athenor-lnz</strong></a>
    </p>
  </div>

  <!-- DSFR JS -->
  <script src="https://cdn.jsdelivr.net/npm/@gouvfr/dsfr@1.13.1/dist/dsfr/dsfr.module.min.js" type="module"></script>
  <script src="https://cdn.jsdelivr.net/npm/@gouvfr/dsfr@1.13.1/dist/dsfr/dsfr.nomodule.min.js" nomodule></script>

  <script>
    const cesuresAdmin = {
      "RÃ©publique franÃ§aise": "RÃ©publique<br>FranÃ§aise",
      "Premier ministre": "Premier<br>ministre",
      "MinistÃ¨re de lâ€™IntÃ©rieur": "MinistÃ¨re<br>de lâ€™IntÃ©rieur",
      "MinistÃ¨re des ArmÃ©es": "MinistÃ¨re<br>des ArmÃ©es",
      "MinistÃ¨re de la Justice": "MinistÃ¨re<br>de la Justice",
      "MinistÃ¨re de la Culture": "MinistÃ¨re<br>de la Culture",
      "MinistÃ¨re de lâ€™Ã‰conomie et des Finances": "MinistÃ¨re<br>de lâ€™Ã‰conomie<br>et des Finances",
      "MinistÃ¨re de la Transition Ã©cologique et solidaire": "MinistÃ¨re<br>de la Transition<br>Ã©cologique et solidaire",
      "MinistÃ¨re des SolidaritÃ©s et de la SantÃ©": "MinistÃ¨re<br>des SolidaritÃ©s<br>et de la SantÃ©",
      "MinistÃ¨re de lâ€™Ã‰ducation nationale et de la Jeunesse": "MinistÃ¨re<br>de lâ€™Ã‰ducation<br>nationale et de la Jeunesse",
      "MinistÃ¨re des Sports": "MinistÃ¨re<br>des Sports",
      "MinistÃ¨re des Outre-mer": "
